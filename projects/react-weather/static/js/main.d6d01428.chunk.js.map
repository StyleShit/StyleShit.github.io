{"version":3,"sources":["components/Clock.js","components/WeatherBlock.js","components/Search.js","components/Toast.js","components/App.js","index.js"],"names":["Clock","offset","useState","getUtcDate","currentTime","serCurrentTime","now","Date","utcTime","getTime","getTimezoneOffset","addZero","num","useEffect","clockInterval","setInterval","clearInterval","className","getHours","getMinutes","iconsConvert","WeatherBlock","data","remove","cssClass","setCssClass","locationName","setLocationName","icon","setIcon","temp","setTemp","weather","Math","floor","main","includes","prev","sys","country","name","onClick","id","timezone","humidity","wind","speed","data-icon","alt","src","Search","search","autocomplete","searchInput","useRef","term","setTerm","autocompleteItems","setAutocompleteItems","currentItem","setCurrentItem","showAutoComplete","searchTerm","toLowerCase","trim","results","i","length","indexOf","timeout","setTimeout","clearTimeout","onSubmit","e","preventDefault","ref","type","placeholder","value","onChange","target","onKeyUp","keyCode","which","onKeyDown","map","item","key","replace","Toast","msg","toastElement","current","App","toasts","setToasts","locationsWeather","setLocationsWeather","cities","setCities","apiKey","process","addLocation","location","endpoint","fetch","then","res","json","parseInt","cod","found","forEach","l","locationExists","toast","catch","console","log","a","Promise","all","newData","newWeatherData","removeLocation","filter","updateDataInterval","updateData","sort","b","x","y","t","tmp","sortLocations","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d6d01428.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport './css/Clock.css';\r\n\r\nexport default function Clock({ offset })\r\n{\r\n    // handle current time\r\n    const [ currentTime, serCurrentTime ] = useState( getUtcDate( offset ) );\r\n\r\n\r\n    // set & destroy clock interval\r\n    useEffect( function(){\r\n\r\n        serCurrentTime( new Date( getUtcDate( offset ) ) );\r\n        \r\n        const clockInterval = setInterval( () => {\r\n            serCurrentTime( new Date( getUtcDate( offset ) ) );\r\n        }, 1000 );\r\n\r\n        return () => {\r\n            clearInterval( clockInterval );\r\n        };\r\n\r\n    }, [ offset ]);\r\n    \r\n\r\n    // get current UTC time as date object\r\n    function getUtcDate( offset )\r\n    {\r\n        var now = new Date();\r\n        var utcTime = now.getTime() + ( now.getTimezoneOffset() * 60000 ); \r\n\r\n        return new Date( utcTime + ( offset * 1000 ) );\r\n    }\r\n\r\n\r\n    // add zero at the beginning of number if it's lower than 10\r\n    function addZero( num )\r\n    {\r\n        if( num < 10 )\r\n            return '0' + num;\r\n\r\n        return num;\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"clock-container\">\r\n            { \r\n                addZero( currentTime.getHours() )   + ':' + \r\n                addZero( currentTime.getMinutes() ) \r\n                // + ':' + \r\n                // addZero( currentTime.getSeconds() ) \r\n            }\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useEffect} from 'react';\r\nimport Clock from './Clock';\r\nimport './css/WeatherBlock.css';\r\n\r\nconst iconsConvert = {\r\n    '01d': 'sun',\r\n    '01n': 'bright-moon',\r\n\r\n    '02d': 'partly-cloudy-day',\r\n    '02n': 'night',\r\n\r\n    '03d': 'cloud',\r\n    '03n': 'cloud',\r\n\r\n    '04d': 'skydrive',\r\n    '04n': 'skydrive',\r\n\r\n    '09d': 'torrential-rain',\r\n    '09n': 'torrential-rain',\r\n\r\n    '10d': 'partly-cloudy-rain',\r\n    '10n': 'light-rain',\r\n    \r\n    '11d': 'cloud-lighting',\r\n    '11n': 'cloud-lighting',\r\n    \r\n    '13d': 'snowflake',\r\n    '13n': 'snowflake',\r\n\r\n    '50d': 'wind',\r\n    '50n': 'wind'\r\n};\r\n\r\n\r\nexport default function WeatherBlock({ data, remove })\r\n{\r\n    const [ cssClass, setCssClass ] = useState( '' );\r\n    const [ locationName, setLocationName ] = useState( '' );\r\n    const [ icon, setIcon ] = useState( '' );\r\n    const [ temp, setTemp ] = useState( '' );\r\n    \r\n\r\n    useEffect( () => {\r\n\r\n        setIcon( iconsConvert[data.weather[0].icon] );\r\n        setTemp( Math.floor( data.main.temp ) );\r\n\r\n        // day / night\r\n        setCssClass( data.weather[0].icon.includes( 'd' ) ? 'day' : 'night' );\r\n        setCssClass( prev => data.weather[0].icon.includes( '13' ) ? 'snow' : prev );\r\n\r\n\r\n        if( data.sys.country )\r\n            setLocationName( data.name + ', ' + data.sys.country );\r\n\r\n        else\r\n            setLocationName( data.name );\r\n            \r\n\r\n    }, [ data ]);\r\n\r\n    return (\r\n\r\n        <div className={ `weather-block ${ cssClass }` }>\r\n\r\n            <span className=\"remove-weather-block\" onClick={ () => { remove( data.id ) } }></span>\r\n\r\n            <div className=\"temperature\">\r\n                { temp }\r\n            </div>\r\n\r\n            <div className=\"location-data\">\r\n                <span className=\"location-time has-icon\">\r\n                    <Clock offset={ data.timezone } />\r\n                </span>\r\n                    \r\n                <br />\r\n                \r\n                <span className=\"location-name has-icon\">\r\n                    { locationName }\r\n                </span>\r\n            </div>\r\n\r\n            <div className=\"location-data\">\r\n                <span className=\"humidity has-icon\">\r\n                    { data.main.humidity }%\r\n                </span>\r\n\r\n                <br />\r\n                \r\n                <span className=\"wind has-icon\">\r\n                    { data.wind.speed }<sup>m/s</sup>\r\n                </span>\r\n            </div>\r\n\r\n            <div className=\"weather-icon\">\r\n                <img data-icon={ icon } alt={ icon } src={ `https://img.icons8.com/ios/50/ffffff/${ icon }.png` } />\r\n                <span className=\"weather-description\">\r\n                    { data.weather[0].main }\r\n                </span>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport './css/Search.css';\r\n\r\nexport default function Search({ search, autocomplete })\r\n{\r\n    const searchInput = useRef();\r\n\r\n    const [ term, setTerm ] = useState( '' );\r\n    const [ autocompleteItems, setAutocompleteItems ] = useState( [] );\r\n    const [ currentItem, setCurrentItem ] = useState( -1 );\r\n\r\n\r\n    // catch arrow keys on search input for autocomplete navigation\r\n    function onKeyUp( e )\r\n    {\r\n        switch( e.keyCode || e.which )\r\n        {\r\n            // up arrow -> previous item\r\n            case 38:\r\n                if( currentItem > 0 )\r\n                    setCurrentItem( prev => prev - 1 );\r\n\r\n                else\r\n                    setCurrentItem( autocompleteItems.length - 1 );\r\n\r\n                break;\r\n\r\n\r\n            // down arrow -> next item\r\n            case 40:\r\n                if( currentItem < autocompleteItems.length -1 )\r\n                    setCurrentItem( prev => prev + 1 );\r\n                else\r\n                    setCurrentItem( -1 );\r\n                break;\r\n\r\n\r\n            // enter -> set term to selected item\r\n            case 13:\r\n                if( currentItem !== -1 )\r\n                    search( autocompleteItems[currentItem] );\r\n\r\n                else\r\n                    search( term );\r\n                \r\n                setTerm( '' );\r\n\r\n                setAutocompleteItems([]);\r\n                setCurrentItem( -1 );\r\n\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    // catch TAB on search input for autocompletion\r\n    function onKeyDown( e )\r\n    {\r\n        // tab\r\n        if( e.keyCode === 9 )\r\n        {\r\n            e.preventDefault();\r\n            setTerm( autocompleteItems[currentItem] );\r\n        }\r\n    }\r\n\r\n\r\n    // show autocmplete suggestions for the current `term`\r\n    function showAutoComplete()\r\n    {\r\n        var searchTerm = term.toLowerCase().trim();\r\n\r\n        if( searchTerm === '' )\r\n        {\r\n            setAutocompleteItems( [] );\r\n            setCurrentItem( -1 );\r\n            return;\r\n        }\r\n\r\n\r\n        var results = [];\r\n        var count = 15;\r\n\r\n        for( var i = 0; i < autocomplete.length; i++ )\r\n        {\r\n            if( autocomplete[i].toLowerCase().indexOf( searchTerm ) > -1 )\r\n                results = [ ...results, autocomplete[i] ];\r\n\r\n            if( results.length === count )\r\n                break;\r\n        }\r\n\r\n        setAutocompleteItems( results );\r\n    }\r\n\r\n\r\n    // show autocomplete when search term has changed\r\n    useEffect( () => {\r\n\r\n        const timeout = setTimeout( showAutoComplete, 300 );\r\n\r\n        return() => {\r\n            clearTimeout( timeout );\r\n        }\r\n        // eslint-disable-next-line\r\n    }, [ term ]);\r\n\r\n\r\n    return (\r\n        <div className=\"search-container\">\r\n            <form onSubmit={ e => e.preventDefault() }>\r\n                <input ref={ searchInput } type=\"text\" placeholder=\"Type a location and press Enter\" value={ term } \r\n                    onChange={ ( e ) => { setTerm( e.target.value ) } } \r\n                    onKeyUp={ onKeyUp }\r\n                    onKeyDown={ onKeyDown } />\r\n\r\n                <div className=\"autocomplete-container\">\r\n                    {\r\n                        autocompleteItems.map( ( item, i ) => {\r\n                            return (\r\n                                <span className={ `autocomplete-item ${ i === currentItem ? 'current-item' : '' }` } \r\n                                    onClick={ () => {\r\n                                        search( item );\r\n                                        setTerm( '' );\r\n                                        setCurrentItem( -1 );\r\n                                        setAutocompleteItems( [] );\r\n                                    }}\r\n                                    key={ i }>\r\n                                    { item.replace( ',', ', ' ) }\r\n                                </span>\r\n                            )\r\n                        })\r\n                    }\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useRef } from 'react';\r\nimport './css/Toast.css';\r\n\r\nexport default function Toast({ type, msg }) \r\n{\r\n    const toastElement = useRef();\r\n\r\n    useEffect(() => {\r\n\r\n        var timeout = setTimeout( () => {\r\n\r\n            toastElement.current.remove()\r\n\r\n        }, 5000 );\r\n\r\n\r\n        return () => {\r\n            \r\n            clearTimeout( timeout );\r\n\r\n        }\r\n    }, [ type ]);\r\n    \r\n    return (\r\n        <div ref={ toastElement } className={ `toast toast-${ type }` }>\r\n            { msg }\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useState } from 'react';\nimport './css/App.css';\nimport WeatherBlock from './WeatherBlock';\nimport Search from './Search';\nimport Toast from './Toast';\n\nfunction App()\n{\n\tconst [ toasts, setToasts ] = useState([]);\n\tconst [ locationsWeather, setLocationsWeather ] = useState([]);\n\tconst [ cities, setCities ] = useState([]);\n\n\tconst apiKey = process.env.REACT_APP_WEATHER_API_KEY;\n\n\t\n\t// search & add location by name\n\tfunction addLocation( location )\n\t{\n\t\tvar endpoint = `https://api.openweathermap.org/data/2.5/weather?q=${ location }&appid=${ apiKey }&units=metric`;\n\n\t\tfetch( endpoint ).then( res => res.json() ).then( json => {\n\t\t\t\n\t\t\tswitch( parseInt( json.cod ) )\n\t\t\t{\n\t\t\t\tcase 200:\n\t\t\t\t\tif( locationExists( json ) )\n\t\t\t\t\t\ttoast( 'error', 'Location \"' + json.name + '\" already exists' );\n\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tsetLocationsWeather( prev => [...prev, json ]);\n\t\t\t\t\t\ttoast( 'success', 'Location \"' + json.name + '\" added' );\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 404:\n\t\t\t\t\ttoast( 'error', 'Location \"' + location + '\" not found' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}).catch( e => {\n\t\t\tconsole.log( e );\n\t\t});\n\t}\n\n\n\t// show toast\n\tfunction toast( type, msg )\n\t{\n\t\tsetToasts( prev => (\n\t\t\t[ ...prev, { type, msg } ]\n\t\t));\n\t}\n\n\n\t// update all existing weather data\n\tasync function updateData()\n\t{\n\t\tvar newWeatherData = await Promise.all( locationsWeather.map( async ( l ) =>\n\t\t{\n\n\t\t\tvar endpoint = `https://api.openweathermap.org/data/2.5/weather?id=${ l.id }&appid=${ apiKey }&units=metric`;\n\t\t\tvar newData = await fetch( endpoint ).then( res => res.json() );\n\t\t\tnewData.name = l.name;\n\t\t\tnewData.sys.country = l.sys.country;\n\n\t\t\treturn newData;\n\n\t\t}));\n\n\t\tsetLocationsWeather( newWeatherData );\n\t\ttoast( 'info', 'Data updated!' );\n\t}\n\n\n\t// check if a location is already exists in the list\n\tfunction locationExists( location )\n\t{\n\t\tvar found = false;\n\n\t\tlocationsWeather.forEach( l => {\n\t\t\tif( l.id === location.id )\n\t\t\t{\n\t\t\t\tfound = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t});\n\n\t\treturn found;\n\t}\n\n\t\n\t// sort the current selected locations \n\tfunction sortLocations()\n\t{\n\t\t// sort array\n\t\tvar tmp = [ ...locationsWeather ];\n\t\t\n\t\ttmp.sort( ( a, b ) => {\n\t\t\tvar x = a.name.toLowerCase();\n\t\t\tvar y = b.name.toLowerCase();\n\n\t\t\tif( x <  y) { return -1; }\n\t\t\tif( x > y ) { return 1; }\n\t\t\treturn 0;\n\t\t});\n\n\t\treturn tmp;\n\t}\n\n\n\tfunction removeLocation( id )\n\t{\n\t\tsetLocationsWeather( prev => {\n\t\t\tvar tmp = prev.filter( l => {\n\t\t\t\treturn l.id !== id\n\t\t\t});\n\n\t\t\treturn tmp;\n\t\t});\n\t}\n\n\t// init weather data updater interval\n\tuseEffect(() => {\n\n\n\t\t// init interval\n\t\tconst updateDataInterval = setInterval( () => {\n\t\t\tupdateData();\n\t\t}, 3  * 60000 );\n\n\t\treturn() => {\n\t\t\tclearInterval( updateDataInterval );\n\t\t}\n\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [ locationsWeather ]);\n\n\n\t// load cities & add default locations on mount\n\tuseEffect( () => {\n\n\t\t// get cities array\n\t\tfetch( 'cities.json' ).then( res => res.json() ).then( json => {\n\t\t\t\n\t\t\tsetTimeout( () => {\n\n\t\t\t\tjson.sort( ( a, b ) => {\n\t\t\t\t\tvar x = a.toLowerCase();\n\t\t\t\t\tvar y = b.toLowerCase();\n\t\t\n\t\t\t\t\tif( x <  y) { return -1; }\n\t\t\t\t\tif( x > y ) { return 1; }\n\t\n\t\t\t\t\treturn 0;\n\t\t\t\t});\n\t\n\t\t\t\tsetCities( json );\n\n\t\t\t}, 500);\n\t\t});\n\n\t\taddLocation( 'Jerusalem' );\n\t\taddLocation( 'washington' );\n\t\taddLocation( 'Japan' );\n\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, []);\n\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"toasts-container\">\n\t\t\t\t{\n\t\t\t\t\ttoasts.map(( t, i ) => (\n\t\t\t\t\t\t<Toast key={ i } msg={ t.msg } type={ t.type } />\n\t\t\t\t\t))\n\t\t\t\t}\n\t\t\t</div>\n\n\t\t\t<div className=\"container\">\n\t\t\t\t\n\t\t\t\t<h1 className=\"title\">\n\t\t\t\t\tWeather Around the World\n\t\t\t\t</h1>\n\n\t\t\t\t<Search search={ addLocation } autocomplete={ cities } />\n\t\t\t\t{ \n\t\t\t\t\tsortLocations( locationsWeather ).map(( data, i ) => (\n\t\t\t\t\t\t<WeatherBlock remove={ removeLocation } key={ i } data={ data } />\n\t\t\t\t\t))\n\t\t\t\t}\n\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);"],"sourceRoot":""}