(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],[,,,,,,,,,,,function(e,t,n){e.exports=n(22)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(9),o=n.n(c),i=n(2),u=n.n(i),s=n(3),l=n(1),f=n(6),m=n(7);function d(e){var t="https://api.openweathermap.org/data/2.5/weather?q=".concat(e,"&appid=").concat("825d5faea8f442ed2bc50b4dd525a59b","&units=metric");return fetch(t).then((function(e){return e.json()}))}var p=n(10);var b={callbacks:[],register:function(e){this.callbacks.push(e)},unregister:function(e){this.callbacks=this.callbacks.filter((function(t){return t!==e}))},start:function(){var e=this;setInterval((function(){e.callbacks.forEach((function(e){return e()}))}),1e3)}};function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new Date,n=t.getTime()+6e4*t.getTimezoneOffset();return new Date(n+1e3*e)}b.start();n(17);function v(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Object(a.useState)(h(e)),n=Object(l.a)(t,2),r=n[0],c=n[1],o=function(){c(h(e))};return Object(a.useEffect)((function(){return b.register(o),function(){return b.unregister(o)}}),[]),r}(e.offset),n=t.getHours().toString().padStart(2,"0"),c=t.getMinutes().toString().padStart(2,"0"),o=t.getSeconds().toString().padStart(2,"0");return r.a.createElement("div",{className:"clock-container"},n,":",c,":",o)}n(18);function E(e){var t=e.data,n=e.onClose,a=void 0===n?function(){}:n,c=t.weather[0].icon,o=w[c],i=Math.floor(t.main.temp),u=[t.name,t.sys.country].filter(Boolean).join(", "),s=function(e){if(e.includes("13"))return"snow";return e.includes("d")?"day":"night"}(c);return r.a.createElement("div",{className:"weather-block ".concat(s)},r.a.createElement("span",{className:"remove-weather-block",onClick:function(){return a(t.id)}}),r.a.createElement("div",{className:"temperature"},i),r.a.createElement("div",{className:"location-data"},r.a.createElement("span",{className:"location-time has-icon"},r.a.createElement(v,{offset:t.timezone})),r.a.createElement("br",null),r.a.createElement("span",{className:"location-name has-icon"},u)),r.a.createElement("div",{className:"location-data"},r.a.createElement("span",{className:"humidity has-icon"},t.main.humidity,"%"),r.a.createElement("br",null),r.a.createElement("span",{className:"wind has-icon"},t.wind.speed,r.a.createElement("sup",null,"m/s"))),r.a.createElement("div",{className:"weather-icon"},r.a.createElement("img",{"data-icon":o,alt:o,src:"https://img.icons8.com/ios/50/ffffff/".concat(o,".png")}),r.a.createElement("span",{className:"weather-description"},t.weather[0].main)))}var w={"01d":"sun","01n":"bright-moon","02d":"partly-cloudy-day","02n":"night","03d":"cloud","03n":"cloud","04d":"skydrive","04n":"skydrive","09d":"torrential-rain","09n":"torrential-rain","10d":"partly-cloudy-rain","10n":"light-rain","11d":"cloud-lighting","11n":"cloud-lighting","13d":"snowflake","13n":"snowflake","50d":"wind","50n":"wind"};n(19);function j(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)([]),u=Object(l.a)(i,2),s=u[0],f=u[1],m=Object(a.useState)(-1),d=Object(l.a)(m,2),p=d[0],b=d[1],h=Object(a.useRef)(null),v=function(t){o(""),f([]),b(-1),e.onSelect&&e.onSelect(t)};return r.a.createElement("div",{className:"autocomplete-container"},r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement("input",{type:"text",placeholder:"Type a location and press Enter",value:c,onChange:function(t){var n=t.target.value;o(n),clearTimeout(h.current),h.current=setTimeout((function(){b(-1),f(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;if(!(t=t.toLowerCase().trim()))return[];for(var a=[],r=0;r<e.length&&(e[r].toLowerCase().includes(t)&&a.push(e[r]),a.length!==n);r++);return a}(e.items,n))}),250)},onKeyUp:function(e){var t,n=0===p,a=p===s.length-1;switch(null!==(t=e.keyCode)&&void 0!==t?t:e.which){case 38:b(n?s.length-1:function(e){return e-1});break;case 40:b(a?0:function(e){return e+1});break;case 13:v(-1!==p?s[p]:c)}},onKeyDown:function(e){9===e.keyCode&&(e.preventDefault(),o(s[p]))}}),r.a.createElement("div",{className:"autocomplete-items-container"},s.map((function(e,t){return r.a.createElement("span",{key:t,className:"autocomplete-item ".concat(t===p?"current-item":""),onClick:function(){return v(e)}},e.replace(",",", "))})))))}n(20);function O(e){var t=e.type,n=e.text;return r.a.createElement("div",{onAnimationEnd:function(e){return e.currentTarget.remove()},className:"toast toast-".concat(t)},n)}n(21);var g=function(){var e=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1];return{toasts:n,showToast:Object(a.useCallback)((function(e,t){r((function(n){return[].concat(Object(p.a)(n),[{type:e,text:t}])}))}),[])}}(),t=e.toasts,c=e.showToast,o=function(){var e=Object(a.useState)({}),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useCallback)(function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t);case 2:return 200!==(a=e.sent).cod||a.id in n||r((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(f.a)({},a.id,a))})),e.abrupt("return",{code:parseInt(a.cod),locationId:a.id,locationName:a.name});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),o=Object(a.useCallback)((function(e){r((function(t){var n=Object(m.a)({},t);return delete n[e],n}))}),[]),i=Object(a.useCallback)((function(e){return e in n}),[n]),p=Object(a.useCallback)(Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.entries(n).map(function(){var e=Object(s.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(l.a)(t,2),a=n[0],r=n[1],e.t0=a,e.next=4,d(r.name);case 4:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:t=e.sent,r(Object.fromEntries(t));case 4:case"end":return e.stop()}}),e)}))),[]);return Object(a.useEffect)((function(){var e=setInterval(p,6e5);return function(){clearInterval(e)}}),[n]),{weather:n,addLocation:c,removeLocation:o,locationExists:i,refetch:p}}(),i=o.weather,b=o.addLocation,h=o.removeLocation,v=o.locationExists,w=Object(a.useState)([]),g=Object(l.a)(w,2),k=g[0],y=g[1];Object(a.useEffect)((function(){b("Jerusalem"),b("washington"),b("Japan"),Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=y,e.next=3,n.e(3).then(n.t.bind(null,23,3));case 3:e.t1=e.sent.default,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[]);var N=function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t);case 2:n=e.sent,e.t0=n.code,e.next=200===e.t0?6:404===e.t0?8:10;break;case 6:return v(n.locationId)?c("error",'Location "'.concat(n.locationName,'" already exists')):c("success",'Location "'.concat(n.locationName,'" added')),e.abrupt("break",11);case 8:return c("error",'Location "'.concat(t,'" not found')),e.abrupt("break",11);case 10:return e.abrupt("break",11);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"toasts-container"},t.map((function(e,t){return r.a.createElement(O,{key:t,type:e.type,text:e.text})}))),r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"title"},"Weather Around the World"),r.a.createElement(j,{items:k,onSelect:N}),Object.values(i).map((function(e){return r.a.createElement(E,{key:e.id,data:e,onClose:function(){return h(e.id)}})}))))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null)),document.getElementById("root"))}],[[11,1,2]]]);
//# sourceMappingURL=main.0fb858a8.chunk.js.map