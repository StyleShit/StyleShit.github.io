{"version":3,"sources":["hooks/useWeather.js","hooks/useClock.js","components/Clock.js","components/WeatherBlock.js","components/AutoComplete.js","components/Toast.js","App.js","hooks/useToasts.js","index.js"],"names":["fetchLocation","locationName","endpoint","process","fetch","then","res","json","Clock","callbacks","register","callback","this","push","unregister","filter","cb","start","setInterval","forEach","getUtcTime","timezoneOffset","now","Date","utcTime","getTime","getTimezoneOffset","currentTime","timeZoneOffset","useState","setCurrentTime","updateTime","useEffect","useClock","offset","hours","getHours","toString","padStart","minutes","getMinutes","seconds","getSeconds","className","WeatherBlock","data","onClose","iconCode","weather","icon","iconsMap","temp","Math","floor","main","name","sys","country","Boolean","join","includes","getClassName","onClick","id","timezone","humidity","wind","speed","data-icon","alt","src","AutoComplete","props","term","setTerm","autocompleteItems","setAutocompleteItems","currentItemId","setCurrentItemId","onChangeTimeout","useRef","onSelect","item","onSubmit","e","preventDefault","type","placeholder","value","onChange","target","clearTimeout","current","setTimeout","items","searchTerm","count","toLowerCase","trim","results","i","length","filterItems","onKeyUp","isFirst","isLast","keyCode","which","prev","onKeyDown","map","key","replace","Toast","text","onAnimationEnd","currentTarget","remove","App","toasts","setToasts","showToast","useCallback","useToasts","setWeather","addLocation","a","cod","code","parseInt","locationId","removeLocation","clone","locationExists","refetch","Promise","all","Object","entries","locationData","newData","fromEntries","interval","clearInterval","useWeather","cities","setCities","default","response","toast","values","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0fb858a8.chunk.js","sourcesContent":["import { useState, useCallback, useEffect } from 'react';\r\n\r\nexport const useWeather = () => {\r\n\tconst [ weather, setWeather ] = useState( {} );\r\n\r\n\tconst addLocation = useCallback( async ( locationName ) => {\r\n\t\tconst data = await fetchLocation( locationName );\r\n\r\n\t\tif ( data.cod === 200 && ! ( data.id in weather ) ) {\r\n\t\t\tsetWeather( ( prev ) => ( {\r\n\t\t\t\t...prev,\r\n\t\t\t\t[ data.id ]: data,\r\n\t\t\t} ) );\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tcode: parseInt( data.cod ),\r\n\t\t\tlocationId: data.id,\r\n\t\t\tlocationName: data.name,\r\n\t\t};\r\n\t}, [ weather ] );\r\n\r\n\tconst removeLocation = useCallback( ( locationId ) => {\r\n\t\tsetWeather( ( prev ) => {\r\n\t\t\tconst clone = { ...prev };\r\n\r\n\t\t\tdelete clone[ locationId ];\r\n\r\n\t\t\treturn clone;\r\n\t\t} );\r\n\t}, [] );\r\n\r\n\tconst locationExists = useCallback( ( locationId ) => {\r\n\t\treturn locationId in weather;\r\n\t}, [ weather ] );\r\n\r\n\tconst refetch = useCallback( async () => {\r\n\t\tconst newData = await Promise.all(\r\n\t\t\tObject.entries( weather )\r\n\t\t\t\t.map( async ( [ locationId, locationData ] ) => {\r\n\t\t\t\t\treturn [\r\n\t\t\t\t\t\tlocationId,\r\n\t\t\t\t\t\tawait fetchLocation( locationData.name ),\r\n\t\t\t\t\t];\r\n\t\t\t\t} ),\r\n\t\t);\r\n\r\n\t\tsetWeather( Object.fromEntries( newData ) );\r\n\t}, [] );\r\n\r\n\tuseEffect( () => {\r\n\t\tconst interval = setInterval( refetch, 10 * 60000 ); // 10 minutes.\r\n\r\n\t\treturn () => {\r\n\t\t\tclearInterval( interval );\r\n\t\t};\r\n\t}, [ weather ] );\r\n\r\n\treturn {\r\n\t\tweather,\r\n\t\taddLocation,\r\n\t\tremoveLocation,\r\n\t\tlocationExists,\r\n\t\trefetch,\r\n\t};\r\n};\r\n\r\nfunction fetchLocation( locationName ) {\r\n\tconst apiKey = process.env.REACT_APP_WEATHER_API_KEY;\r\n\tconst endpoint = `https://api.openweathermap.org/data/2.5/weather?q=${ locationName }&appid=${ apiKey }&units=metric`;\r\n\r\n\treturn fetch( endpoint ).then( ( res ) => res.json() );\r\n}\r\n","import { useEffect, useState } from 'react';\r\n\r\nexport function useClock( timeZoneOffset = 0 ) {\r\n\tconst [ currentTime, setCurrentTime ] = useState( getUtcTime( timeZoneOffset ) );\r\n\r\n\tconst updateTime = () => {\r\n\t\tsetCurrentTime( getUtcTime( timeZoneOffset ) );\r\n\t};\r\n\r\n\tuseEffect( () => {\r\n\t\tClock.register( updateTime );\r\n\r\n\t\treturn () => Clock.unregister( updateTime );\r\n\t}, [] );\r\n\r\n\treturn currentTime;\r\n}\r\n\r\n// Used to sync between all timers.\r\nconst Clock = {\r\n\tcallbacks: [],\r\n\r\n\tregister( callback ) {\r\n\t\tthis.callbacks.push( callback );\r\n\t},\r\n\r\n\tunregister( callback ) {\r\n\t\tthis.callbacks = this.callbacks.filter( ( cb ) => cb !== callback );\r\n\t},\r\n\r\n\tstart() {\r\n\t\tsetInterval( () => {\r\n\t\t\tthis.callbacks.forEach( ( callback ) => callback() );\r\n\t\t}, 1000 );\r\n\t},\r\n};\r\n\r\nClock.start();\r\n\r\nfunction getUtcTime( timezoneOffset = 0 ) {\r\n\tconst now = new Date();\r\n\tconst utcTime = now.getTime() + ( now.getTimezoneOffset() * 60000 );\r\n\r\n\treturn new Date( utcTime + ( timezoneOffset * 1000 ) );\r\n}\r\n","import React from 'react';\r\nimport { useClock } from '../hooks/useClock';\r\nimport './css/Clock.css';\r\n\r\nexport default function Clock( { offset } ) {\r\n\tconst currentTime = useClock( offset );\r\n\r\n\tconst hours = currentTime.getHours().toString().padStart( 2, '0' );\r\n\tconst minutes = currentTime.getMinutes().toString().padStart( 2, '0' );\r\n\tconst seconds = currentTime.getSeconds().toString().padStart( 2, '0' );\r\n\r\n\treturn (\r\n\t\t<div className=\"clock-container\">\r\n\t\t\t{ hours }:{ minutes }:{seconds}\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport Clock from './Clock';\r\nimport './css/WeatherBlock.css';\r\n\r\nexport default function WeatherBlock( { data, onClose = () => {} } ) {\r\n\tconst iconCode = data.weather[ 0 ].icon;\r\n\r\n\tconst icon = iconsMap[ iconCode ];\r\n\tconst temp = Math.floor( data.main.temp );\r\n\tconst locationName = [ data.name, data.sys.country ].filter( Boolean ).join( ', ' );\r\n\tconst className = getClassName( iconCode );\r\n\r\n\treturn (\r\n\r\n\t\t<div className={ `weather-block ${ className }` }>\r\n\r\n\t\t\t<span className=\"remove-weather-block\" onClick={ () => onClose( data.id ) }></span>\r\n\r\n\t\t\t<div className=\"temperature\">\r\n\t\t\t\t{ temp }\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"location-data\">\r\n\t\t\t\t<span className=\"location-time has-icon\">\r\n\t\t\t\t\t<Clock offset={ data.timezone } />\r\n\t\t\t\t</span>\r\n\r\n\t\t\t\t<br />\r\n\r\n\t\t\t\t<span className=\"location-name has-icon\">\r\n\t\t\t\t\t{ locationName }\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"location-data\">\r\n\t\t\t\t<span className=\"humidity has-icon\">\r\n\t\t\t\t\t{ data.main.humidity }%\r\n\t\t\t\t</span>\r\n\r\n\t\t\t\t<br />\r\n\r\n\t\t\t\t<span className=\"wind has-icon\">\r\n\t\t\t\t\t{ data.wind.speed }<sup>m/s</sup>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"weather-icon\">\r\n\t\t\t\t<img data-icon={ icon } alt={ icon } src={ `https://img.icons8.com/ios/50/ffffff/${ icon }.png` } />\r\n\t\t\t\t<span className=\"weather-description\">\r\n\t\t\t\t\t{ data.weather[ 0 ].main }\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction getClassName( iconCode ) {\r\n\tif ( iconCode.includes( '13' ) ) {\r\n\t\treturn 'snow';\r\n\t}\r\n\r\n\treturn iconCode.includes( 'd' ) ? 'day' : 'night';\r\n}\r\n\r\nconst iconsMap = {\r\n\t'01d': 'sun',\r\n\t'01n': 'bright-moon',\r\n\r\n\t'02d': 'partly-cloudy-day',\r\n\t'02n': 'night',\r\n\r\n\t'03d': 'cloud',\r\n\t'03n': 'cloud',\r\n\r\n\t'04d': 'skydrive',\r\n\t'04n': 'skydrive',\r\n\r\n\t'09d': 'torrential-rain',\r\n\t'09n': 'torrential-rain',\r\n\r\n\t'10d': 'partly-cloudy-rain',\r\n\t'10n': 'light-rain',\r\n\r\n\t'11d': 'cloud-lighting',\r\n\t'11n': 'cloud-lighting',\r\n\r\n\t'13d': 'snowflake',\r\n\t'13n': 'snowflake',\r\n\r\n\t'50d': 'wind',\r\n\t'50n': 'wind',\r\n};\r\n","import React, { useRef, useState } from 'react';\r\nimport './css/AutoComplete.css';\r\n\r\nexport default function AutoComplete( props ) {\r\n\tconst [ term, setTerm ] = useState( '' );\r\n\tconst [ autocompleteItems, setAutocompleteItems ] = useState( [] );\r\n\tconst [ currentItemId, setCurrentItemId ] = useState( -1 );\r\n\tconst onChangeTimeout = useRef( null );\r\n\r\n\tconst onChange = ( e ) => {\r\n\t\tconst { value } = e.target;\r\n\r\n\t\tsetTerm( value );\r\n\r\n\t\tclearTimeout( onChangeTimeout.current );\r\n\r\n\t\tonChangeTimeout.current = setTimeout( () => {\r\n\t\t\tsetCurrentItemId( -1 );\r\n\t\t\tsetAutocompleteItems( filterItems( props.items, value ) );\r\n\t\t}, 250 );\r\n\t};\r\n\r\n\tconst onKeyUp = ( e ) => {\r\n\t\tconst isFirst = ( currentItemId === 0 );\r\n\t\tconst isLast = ( currentItemId === autocompleteItems.length - 1 );\r\n\r\n\t\tswitch ( e.keyCode ?? e.which ) {\r\n\t\t\t// Arrow up -> Previous item\r\n\t\t\tcase 38:\r\n\t\t\t\tif ( isFirst ) {\r\n\t\t\t\t\tsetCurrentItemId( autocompleteItems.length - 1 );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetCurrentItemId( ( prev ) => prev - 1 );\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t// Arrow down -> Next item\r\n\t\t\tcase 40:\r\n\t\t\t\tif ( isLast ) {\r\n\t\t\t\t\tsetCurrentItemId( 0 );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetCurrentItemId( ( prev ) => prev + 1 );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t// Enter -> Set term to selected item\r\n\t\t\tcase 13:\r\n\t\t\t\tif ( currentItemId !== -1 ) {\r\n\t\t\t\t\tonSelect( autocompleteItems[ currentItemId ] );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tonSelect( term );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tconst onKeyDown = ( e ) => {\r\n\t\t// Tab\r\n\t\tif ( e.keyCode === 9 ) {\r\n\t\t\te.preventDefault();\r\n\t\t\tsetTerm( autocompleteItems[ currentItemId ] );\r\n\t\t}\r\n\t};\r\n\r\n\tconst onSelect = ( item ) => {\r\n\t\tsetTerm( '' );\r\n\t\tsetAutocompleteItems( [] );\r\n\t\tsetCurrentItemId( -1 );\r\n\r\n\t\tif ( props.onSelect ) {\r\n\t\t\tprops.onSelect( item );\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"autocomplete-container\">\r\n\t\t\t<form onSubmit={ ( e ) => e.preventDefault() }>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder=\"Type a location and press Enter\"\r\n\t\t\t\t\tvalue={ term }\r\n\t\t\t\t\tonChange={ onChange }\r\n\t\t\t\t\tonKeyUp={ onKeyUp }\r\n\t\t\t\t\tonKeyDown={ onKeyDown }\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<div className=\"autocomplete-items-container\">\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tautocompleteItems.map( ( item, i ) => (\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tkey={ i }\r\n\t\t\t\t\t\t\t\tclassName={ `autocomplete-item ${ i === currentItemId ? 'current-item' : '' }` }\r\n\t\t\t\t\t\t\t\tonClick={ () => onSelect( item ) }\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{ item.replace( ',', ', ' ) }\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t) )\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction filterItems( items, searchTerm, count = 5 ) {\r\n\tsearchTerm = searchTerm.toLowerCase().trim();\r\n\r\n\tif ( ! searchTerm ) {\r\n\t\treturn [];\r\n\t}\r\n\r\n\tconst results = [];\r\n\r\n\tfor ( let i = 0; i < items.length; i++ ) {\r\n\t\tif ( items[ i ].toLowerCase().includes( searchTerm ) ) {\r\n\t\t\tresults.push( items[ i ] );\r\n\t\t}\r\n\r\n\t\tif ( results.length === count ) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\treturn results;\r\n}\r\n","import React from 'react';\r\nimport './css/Toast.css';\r\n\r\nexport default function Toast( { type, text } ) {\r\n\treturn (\r\n\t\t<div\r\n\t\t\tonAnimationEnd={ ( e ) => e.currentTarget.remove() }\r\n\t\t\tclassName={ `toast toast-${ type }` }\r\n\t\t>\r\n\t\t\t{ text }\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useWeather } from './hooks/useWeather';\r\nimport { useToasts } from './hooks/useToasts';\r\nimport WeatherBlock from './components/WeatherBlock';\r\nimport AutoComplete from './components/AutoComplete';\r\nimport Toast from './components/Toast';\r\nimport './App.css';\r\n\r\nfunction App() {\r\n\tconst { toasts, showToast } = useToasts();\r\n\tconst { weather, addLocation, removeLocation, locationExists } = useWeather();\r\n\tconst [ cities, setCities ] = useState( [] );\r\n\r\n\tuseEffect( () => {\r\n\t\taddLocation( 'Jerusalem' );\r\n\t\taddLocation( 'washington' );\r\n\t\taddLocation( 'Japan' );\r\n\r\n\t\t( async () => {\r\n\t\t\tsetCities( ( await import( './data/cities.json' ) ).default );\r\n\t\t} )();\r\n\t}, [] );\r\n\r\n\tconst onSelect = async ( locationName ) => {\r\n\t\tconst response = await addLocation( locationName );\r\n\r\n\t\tswitch ( response.code ) {\r\n\t\t\tcase 200:\r\n\t\t\t\tif ( locationExists( response.locationId ) ) {\r\n\t\t\t\t\tshowToast( 'error', `Location \"${ response.locationName }\" already exists` );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tshowToast( 'success', `Location \"${ response.locationName }\" added` );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 404:\r\n\t\t\t\tshowToast( 'error', `Location \"${ locationName }\" not found` );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"toasts-container\">\r\n\t\t\t\t{\r\n\t\t\t\t\ttoasts.map( ( toast, i ) => (\r\n\t\t\t\t\t\t<Toast key={ i } type={ toast.type } text={ toast.text } />\r\n\t\t\t\t\t) )\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"container\">\r\n\r\n\t\t\t\t<h1 className=\"title\">\r\n\t\t\t\t\tWeather Around the World\r\n\t\t\t\t</h1>\r\n\r\n\t\t\t\t<AutoComplete items={ cities } onSelect={ onSelect } />\r\n\t\t\t\t{\r\n\t\t\t\t\tObject.values( weather ).map( ( locationData ) => (\r\n\t\t\t\t\t\t<WeatherBlock\r\n\t\t\t\t\t\t\tkey={ locationData.id }\r\n\t\t\t\t\t\t\tdata={ locationData }\r\n\t\t\t\t\t\t\tonClose={ () => removeLocation( locationData.id ) }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) )\r\n\t\t\t\t}\r\n\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","import { useState, useCallback } from 'react';\r\n\r\nexport const useToasts = () => {\r\n\tconst [ toasts, setToasts ] = useState( [] );\r\n\r\n\tconst showToast = useCallback( ( type, text ) => {\r\n\t\tsetToasts( ( prev ) => (\r\n\t\t\t[ ...prev, { type, text } ]\r\n\t\t) );\r\n\t}, [] );\r\n\r\n\treturn {\r\n\t\ttoasts,\r\n\t\tshowToast,\r\n\t};\r\n};\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n\t<React.StrictMode>\r\n\t\t<App />\r\n\t</React.StrictMode>,\r\n\tdocument.getElementById( 'root' ),\r\n);\r\n"],"sourceRoot":""}