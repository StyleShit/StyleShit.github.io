(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(20)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(8),o=n.n(r),i=n(4),u=n.n(i),s=n(6),l=n(2),f=n(1);n(15),n(16);function m(e){var t=e.offset,n=Object(a.useState)(u(t)),r=Object(f.a)(n,2),o=r[0],i=r[1];function u(e){var t=new Date,n=t.getTime()+6e4*t.getTimezoneOffset();return new Date(n+1e3*e)}function s(e){return e<10?"0"+e:e}return Object(a.useEffect)((function(){i(new Date(u(t)));var e=setInterval((function(){i(new Date(u(t)))}),1e3);return function(){clearInterval(e)}}),[t]),c.a.createElement("div",{className:"clock-container"},s(o.getHours())+":"+s(o.getMinutes()))}n(17);var d={"01d":"sun","01n":"bright-moon","02d":"partly-cloudy-day","02n":"night","03d":"cloud","03n":"cloud","04d":"skydrive","04n":"skydrive","09d":"torrential-rain","09n":"torrential-rain","10d":"partly-cloudy-rain","10n":"light-rain","11d":"cloud-lighting","11n":"cloud-lighting","13d":"snowflake","13n":"snowflake","50d":"wind","50n":"wind"};function p(e){var t=e.data,n=e.remove,r=Object(a.useState)(""),o=Object(f.a)(r,2),i=o[0],u=o[1],s=Object(a.useState)(""),l=Object(f.a)(s,2),p=l[0],h=l[1],b=Object(a.useState)(""),v=Object(f.a)(b,2),w=v[0],E=v[1],j=Object(a.useState)(""),O=Object(f.a)(j,2),y=O[0],g=O[1];return Object(a.useEffect)((function(){E(d[t.weather[0].icon]),g(Math.floor(t.main.temp)),u(t.weather[0].icon.includes("d")?"day":"night"),u((function(e){return t.weather[0].icon.includes("13")?"snow":e})),t.sys.country?h(t.name+", "+t.sys.country):h(t.name)}),[t]),c.a.createElement("div",{className:"weather-block ".concat(i)},c.a.createElement("span",{className:"remove-weather-block",onClick:function(){n(t.id)}}),c.a.createElement("div",{className:"temperature"},y),c.a.createElement("div",{className:"location-data"},c.a.createElement("span",{className:"location-time has-icon"},c.a.createElement(m,{offset:t.timezone})),c.a.createElement("br",null),c.a.createElement("span",{className:"location-name has-icon"},p)),c.a.createElement("div",{className:"location-data"},c.a.createElement("span",{className:"humidity has-icon"},t.main.humidity,"%"),c.a.createElement("br",null),c.a.createElement("span",{className:"wind has-icon"},t.wind.speed,c.a.createElement("sup",null,"m/s"))),c.a.createElement("div",{className:"weather-icon"},c.a.createElement("img",{"data-icon":w,alt:w,src:"https://img.icons8.com/ios/50/ffffff/".concat(w,".png")}),c.a.createElement("span",{className:"weather-description"},t.weather[0].main)))}n(18);function h(e){var t=e.search,n=e.autocomplete,r=Object(a.useRef)(),o=Object(a.useState)(""),i=Object(f.a)(o,2),u=i[0],s=i[1],m=Object(a.useState)([]),d=Object(f.a)(m,2),p=d[0],h=d[1],b=Object(a.useState)(-1),v=Object(f.a)(b,2),w=v[0],E=v[1];function j(){var e=u.toLowerCase().trim();if(""===e)return h([]),void E(-1);for(var t=[],a=0;a<n.length&&(n[a].toLowerCase().indexOf(e)>-1&&(t=[].concat(Object(l.a)(t),[n[a]])),15!==t.length);a++);h(t)}return Object(a.useEffect)((function(){var e=setTimeout(j,300);return function(){clearTimeout(e)}}),[u]),c.a.createElement("div",{className:"search-container"},c.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},c.a.createElement("input",{ref:r,type:"text",placeholder:"Type a location and press Enter",value:u,onChange:function(e){s(e.target.value)},onKeyUp:function(e){switch(e.keyCode||e.which){case 38:E(w>0?function(e){return e-1}:p.length-1);break;case 40:w<p.length-1?E((function(e){return e+1})):E(-1);break;case 13:t(-1!==w?p[w]:u),s(""),h([]),E(-1)}},onKeyDown:function(e){9===e.keyCode&&(e.preventDefault(),s(p[w]))}}),c.a.createElement("div",{className:"autocomplete-container"},p.map((function(e,n){return c.a.createElement("span",{className:"autocomplete-item ".concat(n===w?"current-item":""),onClick:function(){t(e),s(""),E(-1),h([])},key:n},e.replace(",",", "))})))))}n(19);function b(e){var t=e.type,n=e.msg,r=Object(a.useRef)();return Object(a.useEffect)((function(){var e=setTimeout((function(){r.current.remove()}),5e3);return function(){clearTimeout(e)}}),[t]),c.a.createElement("div",{ref:r,className:"toast toast-".concat(t)},n)}var v=function(){var e=Object(a.useState)([]),t=Object(f.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)([]),i=Object(f.a)(o,2),m=i[0],d=i[1],v=Object(a.useState)([]),w=Object(f.a)(v,2),E=w[0],j=w[1],O="825d5faea8f442ed2bc50b4dd525a59b";function y(e){var t="https://api.openweathermap.org/data/2.5/weather?q=".concat(e,"&appid=").concat(O,"&units=metric");fetch(t).then((function(e){return e.json()})).then((function(t){switch(parseInt(t.cod)){case 200:!function(e){var t=!1;return m.forEach((function(n){n.id!==e.id||(t=!0)})),t}(t)?(d((function(e){return[].concat(Object(l.a)(e),[t])})),g("success",'Location "'+t.name+'" added')):g("error",'Location "'+t.name+'" already exists');break;case 404:g("error",'Location "'+e+'" not found')}})).catch((function(e){console.log(e)}))}function g(e,t){r((function(n){return[].concat(Object(l.a)(n),[{type:e,msg:t}])}))}function k(){return(k=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(m.map(function(){var e=Object(s.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.openweathermap.org/data/2.5/weather?id=".concat(t.id,"&appid=").concat(O,"&units=metric"),e.next=3,fetch(n).then((function(e){return e.json()}));case 3:return(a=e.sent).name=t.name,a.sys.country=t.sys.country,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:t=e.sent,d(t),g("info","Data updated!");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){d((function(t){return t.filter((function(t){return t.id!==e}))}))}return Object(a.useEffect)((function(){var e=setInterval((function(){!function(){k.apply(this,arguments)}()}),18e4);return function(){clearInterval(e)}}),[m]),Object(a.useEffect)((function(){fetch("cities.json").then((function(e){return e.json()})).then((function(e){setTimeout((function(){e.sort((function(e,t){var n=e.toLowerCase(),a=t.toLowerCase();return n<a?-1:n>a?1:0})),j(e)}),500)})),y("Jerusalem"),y("washington"),y("Japan")}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"toasts-container"},n.map((function(e,t){return c.a.createElement(b,{key:t,msg:e.msg,type:e.type})}))),c.a.createElement("div",{className:"container"},c.a.createElement("h1",{className:"title"},"Weather Around the World"),c.a.createElement(h,{search:y,autocomplete:E}),function(){var e=Object(l.a)(m);return e.sort((function(e,t){var n=e.name.toLowerCase(),a=t.name.toLowerCase();return n<a?-1:n>a?1:0})),e}().map((function(e,t){return c.a.createElement(p,{remove:N,key:t,data:e})}))))};o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(v,null)),document.getElementById("root"))}],[[9,1,2]]]);
//# sourceMappingURL=main.d6d01428.chunk.js.map